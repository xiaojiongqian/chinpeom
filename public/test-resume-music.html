<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³ä¹æš‚åœ/æ¢å¤åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .control-group {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        button {
            margin: 5px;
            padding: 12px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            background: #007bff;
            color: white;
            transition: background-color 0.3s;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .info {
            background: #e7f3ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
            border-left: 4px solid #007bff;
        }
        .status {
            font-weight: bold;
            color: #333;
        }
        .time-display {
            font-family: monospace;
            font-size: 18px;
            color: #007bff;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        h3 {
            color: #555;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸµ éŸ³ä¹æš‚åœ/æ¢å¤åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="info">
            <h3>æµ‹è¯•è¯´æ˜</h3>
            <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•éŸ³ä¹çš„æš‚åœå’Œæ¢å¤åŠŸèƒ½ã€‚ç‚¹å‡»"æ’­æ”¾éŸ³ä¹"å¼€å§‹æ’­æ”¾ï¼Œç„¶åä½¿ç”¨"æš‚åœ"å’Œ"æ¢å¤"æŒ‰é’®æµ‹è¯•æ˜¯å¦èƒ½ä»æš‚åœä½ç½®ç»§ç»­æ’­æ”¾ã€‚</p>
        </div>

        <div class="control-group">
            <h3>åŸºæœ¬æ§åˆ¶</h3>
            <button onclick="startMusic()">æ’­æ”¾éŸ³ä¹</button>
            <button onclick="pauseMusic()">æš‚åœ</button>
            <button onclick="resumeMusic()">æ¢å¤æ’­æ”¾</button>
            <button onclick="stopMusic()">åœæ­¢</button>
        </div>

        <div class="control-group">
            <h3>éŸ³ä¹åˆ‡æ¢</h3>
            <button onclick="nextMusic()">ä¸‹ä¸€é¦–</button>
            <button onclick="toggleMute()">åˆ‡æ¢é™éŸ³</button>
        </div>

        <div class="control-group">
            <h3>çŠ¶æ€ä¿¡æ¯</h3>
            <div class="info">
                <div>å½“å‰éŸ³ä¹: <span class="status" id="currentMusic">-</span></div>
                <div>æ’­æ”¾çŠ¶æ€: <span class="status" id="playingStatus">-</span></div>
                <div>é™éŸ³çŠ¶æ€: <span class="status" id="muteStatus">-</span></div>
                <div>æ’­æ”¾æ—¶é—´: <span class="time-display" id="currentTime">00:00</span> / <span class="time-display" id="duration">00:00</span></div>
            </div>
        </div>

        <div class="control-group">
            <h3>æµ‹è¯•æ­¥éª¤</h3>
            <ol>
                <li>ç‚¹å‡»"æ’­æ”¾éŸ³ä¹"å¼€å§‹æ’­æ”¾</li>
                <li>ç­‰å¾…å‡ ç§’é’Ÿï¼Œè§‚å¯Ÿæ’­æ”¾æ—¶é—´</li>
                <li>ç‚¹å‡»"æš‚åœ"æŒ‰é’®</li>
                <li>ç­‰å¾…å‡ ç§’é’Ÿ</li>
                <li>ç‚¹å‡»"æ¢å¤æ’­æ”¾"æŒ‰é’®</li>
                <li>éªŒè¯éŸ³ä¹æ˜¯å¦ä»æš‚åœä½ç½®ç»§ç»­æ’­æ”¾</li>
            </ol>
        </div>
    </div>

    <script>
        // éŸ³ä¹åˆ—è¡¨
        const musicList = [
            '1.å¤éŸµç»µé•¿.mp3',
            '2.å…³å±±æœˆ.mp3',
            '3.é»„é¹¤å½’æ¥.mp3',
            '4.å°†è¿›é…’.mp3'
        ];

        let currentIndex = 0;
        let audio = null;
        let isPlaying = false;
        let isMuted = false;

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateInfo() {
            document.getElementById('currentMusic').textContent = musicList[currentIndex];
            document.getElementById('playingStatus').textContent = isPlaying ? 'æ’­æ”¾ä¸­' : 'å·²æš‚åœ';
            document.getElementById('muteStatus').textContent = isMuted ? 'é™éŸ³' : 'æ­£å¸¸';
            
            if (audio) {
                document.getElementById('currentTime').textContent = formatTime(audio.currentTime || 0);
                document.getElementById('duration').textContent = formatTime(audio.duration || 0);
            }
        }

        function initAudio() {
            if (!audio) {
                audio = new Audio();
                audio.volume = 0.3;
                audio.loop = false;
                audio.preload = 'metadata';

                audio.addEventListener('play', () => {
                    isPlaying = true;
                    updateInfo();
                });

                audio.addEventListener('pause', () => {
                    isPlaying = false;
                    updateInfo();
                });

                audio.addEventListener('timeupdate', () => {
                    updateInfo();
                });

                audio.addEventListener('loadedmetadata', () => {
                    updateInfo();
                });
            }
        }

        function startMusic() {
            initAudio();
            const musicPath = `/backgroundmusic/${musicList[currentIndex]}`;
            
            // è®¾ç½®æ–°çš„éŸ³ä¹æºå¹¶ä»å¤´æ’­æ”¾
            audio.src = musicPath;
            audio.currentTime = 0;
            
            audio.play().then(() => {
                console.log('å¼€å§‹æ’­æ”¾:', musicList[currentIndex]);
                updateInfo();
            }).catch(error => {
                console.error('æ’­æ”¾å¤±è´¥:', error);
                alert('æ’­æ”¾å¤±è´¥: ' + error.message);
            });
        }

        function pauseMusic() {
            if (audio) {
                audio.pause();
                console.log('éŸ³ä¹å·²æš‚åœï¼Œå½“å‰ä½ç½®:', audio.currentTime);
                updateInfo();
            }
        }

        function resumeMusic() {
            if (audio && !isMuted) {
                // ä»å½“å‰ä½ç½®æ¢å¤æ’­æ”¾ï¼Œä¸é‡ç½®currentTime
                audio.play().then(() => {
                    console.log('æ¢å¤æ’­æ”¾ï¼Œä»ä½ç½®:', audio.currentTime);
                    updateInfo();
                }).catch(error => {
                    console.error('æ¢å¤æ’­æ”¾å¤±è´¥:', error);
                    alert('æ¢å¤æ’­æ”¾å¤±è´¥: ' + error.message);
                });
            }
        }

        function stopMusic() {
            if (audio) {
                audio.pause();
                audio.currentTime = 0;
                isPlaying = false;
                console.log('éŸ³ä¹å·²åœæ­¢');
                updateInfo();
            }
        }

        function nextMusic() {
            currentIndex = (currentIndex + 1) % musicList.length;
            console.log('åˆ‡æ¢åˆ°:', musicList[currentIndex]);
            if (audio && isPlaying) {
                startMusic(); // åˆ‡æ¢éŸ³ä¹æ—¶ä»å¤´æ’­æ”¾
            }
            updateInfo();
        }

        function toggleMute() {
            isMuted = !isMuted;
            if (isMuted) {
                pauseMusic();
            } else if (audio && !isPlaying) {
                resumeMusic();
            }
            updateInfo();
        }

        // åˆå§‹åŒ–æ˜¾ç¤º
        updateInfo();
        
        // å®šæœŸæ›´æ–°æ—¶é—´æ˜¾ç¤º
        setInterval(updateInfo, 1000);
    </script>
</body>
</html> 