# 唐诗译境(Chinpoem) 系统联调测试指南

## 🚀 系统状态

### ✅ 服务运行状态
- **后端服务**: ✅ 正常运行 (localhost:3001)
- **前端服务**: ✅ 正常运行 (localhost:3000) 
- **数据库连接**: ✅ 正常连接 (MySQL)
- **API代理**: ✅ 前后端通信正常

### 🔗 访问地址
- **前端应用**: http://localhost:3000
- **后端API**: http://localhost:3001/api
- **API文档**: http://localhost:3001/api/health (健康检查)

## 🧪 功能测试指南

### 1. 基础功能测试

#### 🏠 主页访问
1. 打开浏览器访问：http://localhost:3000
2. 验证页面正常加载
3. 检查是否显示"唐诗译境"标题
4. 确认游戏介绍文案显示正常

#### ⚙️ 配置加载测试
1. 检查学级配置是否正常加载（共11个等级）
2. 验证免费等级：白丁、学童、秀才
3. 验证付费等级：廪生、贡生、举人、贡士、进士、探花、榜眼、状元

### 2. 用户认证功能测试

#### 🔐 第三方登录测试
**测试微信登录**：
- 模拟登录凭证：`{ provider: "wechat", access_token: "valid_wechat_token" }`
- 预期结果：创建新用户，返回JWT令牌

**测试Google登录**：
- 模拟登录凭证：`{ provider: "google", access_token: "valid_google_token" }`
- 预期结果：创建Google用户账号

**测试Apple登录**：
- 模拟登录凭证：`{ provider: "apple", access_token: "valid_apple_token" }`
- 预期结果：创建Apple用户账号

#### 🎯 API测试命令
```bash
# 测试微信登录
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"provider":"wechat","access_token":"valid_wechat_token"}'

# 测试Google登录  
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"provider":"google","access_token":"valid_google_token"}'

# 测试Apple登录
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"provider":"apple","access_token":"valid_apple_token"}'
```

### 3. 用户管理功能测试

#### 👤 用户信息管理
1. **获取用户信息**: 验证用户资料、积分、等级显示
2. **更新用户设置**: 测试难度模式、语言设置、音效设置
3. **积分同步**: 测试积分更新和等级计算

#### 📊 积分系统测试
- **简单模式**: 答对+1分，答错-1分
- **困难模式**: 答对+2分，答错-2分
- **等级升级**: 验证积分达到阈值时等级提升

### 4. 支付功能测试

#### 💰 产品展示
1. 访问产品列表：验证3种会员类型显示
   - 月度会员：¥9.9
   - 年度会员：¥68.0 
   - 终身会员：¥198.0

#### 🛒 订单流程测试
1. **创建订单**: 选择产品类型和支付方式
2. **支付验证**: 模拟支付成功/失败
3. **支付历史**: 查看订单记录和状态

#### 💳 支付方式测试
支持的支付方式：
- ✅ 支付宝
- ✅ 微信支付  
- ✅ Apple Pay
- ✅ Google Pay
- ✅ Stripe

### 5. 游戏核心功能测试

#### 📖 诗歌学习模式
1. **简单模式**: 
   - 显示外语提示
   - 可选择提示语言（英语、西班牙语、日语、法语、德语）
   - 4选1答题模式

2. **困难模式**:
   - 无外语提示
   - 仅显示星号占位
   - 考验记忆和理解能力

#### 🎵 多媒体功能
1. **背景音乐**: 测试音乐播放/暂停
2. **音效控制**: 测试音效开关
3. **诗歌配图**: 验证图片正常显示

### 6. 数据管理测试

#### 💾 本地存储
1. **用户设置**: 验证设置持久化保存
2. **游戏进度**: 测试积分和等级记录
3. **离线功能**: 验证无网络时基本功能可用

#### 🔄 数据同步
1. **登录同步**: 用户登录后同步云端数据
2. **积分同步**: 定期同步积分到服务器
3. **设置同步**: 跨设备设置同步

## 🔧 开发者工具

### API测试命令集合

```bash
# 健康检查
curl http://localhost:3000/api/health

# 获取学级配置
curl http://localhost:3000/api/config/ranks

# 获取应用配置
curl http://localhost:3000/api/config/app

# 获取产品列表
curl http://localhost:3000/api/payment/products
```

### 浏览器开发者工具
1. **Network标签**: 监控API请求响应
2. **Console标签**: 查看前端日志输出
3. **Application标签**: 检查localStorage数据
4. **Vue DevTools**: 监控Vue组件状态

## 🚨 常见问题排查

### 1. 服务连接问题
**症状**: 前端无法访问后端API
**排查步骤**:
1. 检查后端服务是否运行：`curl http://localhost:3001/api/health`
2. 检查前端代理配置：确认vite.config.ts中的proxy设置
3. 查看浏览器Network面板是否有CORS错误

### 2. 数据库连接问题
**症状**: API返回500错误
**排查步骤**:
1. 检查MySQL服务是否运行
2. 验证数据库连接配置（.env文件）
3. 运行数据库初始化：`npm run db:init`

### 3. 登录认证问题
**症状**: 登录请求失败
**排查步骤**:
1. 检查Mock服务是否正常
2. 验证JWT密钥配置
3. 查看后端服务日志

## 🎯 测试建议

### 功能测试优先级
1. **高优先级**: 用户登录、基础游戏功能、积分系统
2. **中优先级**: 支付功能、多语言支持、音效功能  
3. **低优先级**: 高级设置、统计功能、社交分享

### 兼容性测试
1. **浏览器兼容**: Chrome、Safari、Firefox、Edge
2. **设备兼容**: 桌面端、平板、手机
3. **系统兼容**: Windows、macOS、Linux

### 性能测试
1. **页面加载速度**: 首屏加载时间 < 3秒
2. **API响应时间**: 平均响应时间 < 500ms
3. **内存使用**: 检查是否有内存泄漏

## 📝 测试记录

### 测试通过项目 ✅
- [x] 后端服务启动
- [x] 前端服务启动
- [x] API代理通信
- [x] 健康检查接口
- [x] 学级配置接口
- [x] 数据库连接

### 待测试项目 📋
- [ ] 前端界面完整测试
- [ ] 用户登录流程测试
- [ ] 游戏核心功能测试
- [ ] 支付流程测试
- [ ] 多设备兼容性测试

---

**联调启动时间**: 2025年6月2日 11:16  
**系统状态**: 🟢 运行正常  
**测试状态**: 🟡 就绪，等待用户测试  

**下一步**: 请在浏览器中访问 http://localhost:3000 开始体验系统！ 